@!(ctx)

@function body() {
  <h1>Woohooo!</h1>
  <canvas id='c' width='800' height='300'></canvas>
}

@function scripts() {
	<script>
	  $c = document.getElementById('c');
	  $ctx = $c.getContext('2d');
	  $ctx.clearRect(0, 0, 800, 300);
	  $px = $ctx.createImageData(1, 1);
	  $pxls = [];
	  // Precompute random pixels so this time isn't included in the tests
	for (var i = 0; i < 10000; ++i) {
	    var px={
	   x: Math.random() * 800 << 0,
	   y: Math.random() * 300 << 0,
	   r: Math.random() * 255 << 0,
	   g: Math.random() * 255 << 0,
	   b: Math.random() * 255 << 0,
	   a: Math.random() * 128 << 0 + 128
	}
	$ctx.fillStyle = 'rgba(' + px.r + ',' + px.g + ',' + px.b + ',' + (px.a / 255) + ')';
	$ctx.fillRect(px.x, px.y, 1, 1);
	                                };
	  $i = 0;
	console.log("algo");   
	</script>
}
@render("../layouts/main.html",body,scripts);